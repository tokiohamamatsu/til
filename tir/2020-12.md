# 2020-12

## 01

### [【PHP】ユーザー定義関数を初心者に説明してみる \- Qiita](https://qiita.com/Fell/items/db4d8258268219909395)

関数の使い道は主に状態を変化させる、数式などで値やオブジェクトを返すなどに使われる。

関数名には適切な名前をつける必要があるが、これが個人的にとても難しい。
関数名を間違えると、可読性が大きく下がる。

関数を使えばテストが容易になり、使いまわしてコードを短くすることができる。

関数を作る時は最初からやろうとするとうまく行かず、処理が増えてきたときに作るのが安定する。

関数は関数名さえ間違えなければ便利なものになる。

## 02

### [【JS】関数を代入した変数を複数記述するときの注意点 \- Qiita](https://qiita.com/yuta-38/items/687c6eb20cf3a45f7431)

Booleanを返す関数を代入した変数の処理を複数の条件で設定する

複数の真偽値を設定する場合は、引き数を明示し双方の変数にそれぞれ渡す

```js
moreThanOne = ({arr}) => arr.length > 1
lessThanThree = ({arr}) => arr.length < 3

//正常な記述
judgeOK = (params) => lessThanThree(params) && moreThanOne(params)
```

正常な記述はmoreThanOneの結果とlessThanThreeの結果を結んでなく、変数自体をつなげている。

上記の場合は前者がtrue/false以外の場合、後方の値を返す。結果として`judgeNG = moreThanOne`と同じになる。

変数が１つの場合

変数が１つの場合は引き数を渡さなくても意図した動きをする
```js
moreThanOne = ({arr}) => arr.length > 1

//意図した動きになる
judge = moreThanOne
judge({arr})
```

judgeがmoreThanOne に格納した変数そのものになっているため、引き数を渡さなくても真偽値が返る。

judge = moreThanOne
　　　　　↓↑
judge = ({arr}) => arr.length > 1

変数に関数を格納した場合はこういう使い方は避けたほうがいいと思った。

## 03

### [LngLatBounds は正しく「南西」→「北東」の順に渡しましょう \- Qiita](https://qiita.com/amay077/items/7e5db9687758647a26f0)

LngLatBoundsはMapboxで地図の範囲を示すクラス

Mapboxとは

[Mapboxとは？Mapboxが世界中で採用される理由 \| 国際航業株式会社](https://biz.kkc.co.jp/mapbox_blogdetail/2020071401/)

このクラスには指定した緯度経度が含まれるように範囲を拡張するextend(lnglat)というメソッドがある。

[Geography and geometry \| Mapbox GL JS \| Mapbox](https://docs.mapbox.com/mapbox-gl-js/api/geography/#lnglatbounds)

これが正しく動かすには南西から北東の範囲を指定する必要がある

```js
// 南西[130,35] 北東[132,37]
const bounds1 = new LngLatBounds([130, 35], [132, 37]);
bounds1.extend([133, 38]);
console.log(bounds1.toArray()); // OK - 130, 35, 133, 38
```

PostgreSQLを使い地図範囲をbox型で格納するとbox型の使用で頂点は右上の頂点を最初に、左下の頂点をその後に格納する必要に応じて並び替える仕様でINSERT時に正規化され値が逆転して格納される。

DBから直接持ってきた値を使うとLngLatBoundsは正常に動かない。

DBから直接持ってきた値で動かないのは気づくのに時間がかかる。

 ## 04

 ### [1分で学ぶJSON入門 \- Qiita](https://qiita.com/miumi/items/1e3496131900c6bb90f4)

 JSONが生まれる前はXMLというデータ記述言語でjavascriptとデータのやりとりをしていた。
 XMLはHTMLと同じように文章中の文字列をdivで挟むように書く必要がある。

 例

 ```xml
<?xml version="1.0" encoding="utf-8"?>
<data>
  <item>
    <name>太郎</name>
    <age>26</age>
  </item>
  <item>
    <name>花子</name>
    <age>23</age>
  </item>
</data>
 ```

 しかし、この方法だとタグの数だけデータ量が多くなりパフォーマンスが下がる。

 そこでデータをテキスト(オブジェクト)で記載したJSON形式が誕生。
 タグがいらない分データ量はXMLより少なくて済む。

 ```json
[
  {"name" : "太郎", "age" : 26},
  {"name" : "花子", "age" : 23}
]
 ```

 JsonやXMLはデータ記述語と呼ばれる。

XMLは今も使われているイメージを持っているのだが、何に使われているのだろう?
