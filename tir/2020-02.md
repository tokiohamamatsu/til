# 2020-02

## 03

### [envファイルとはなんだろう。 \- Qiita](https://qiita.com/harutakaoka522/items/e0abddfd0311eb4fb32b)

laravelのenvファイルはUNIX系OSで使えるコマンド`env`の本体ファイル、シェル起動時に読み込まれ、リポジトリにコミットされない。環境ごとに変更したい情報をまとめておくファイル。

開発環境、本番環境の切り替えやDBの接続情報の変更など

envはconfig経由で呼び出す

例

```php
'username' => env('DB_USERNAME', 'doruji'),
```

config/app
```php
return [
    'hoge_env' => env('hoho'),
];
```

Controller

```php
$hoge = config('app.hoge_env');
dd($hoge);
```

※ envファイルはコントローラやモデルから直接読み込んではいけない

envファイルは`Illuminate\Foundation\Bootstrap\LoadEnvironmentVariable`の`bootstrap()`で読み込まれ、キャッシュがある場合は読み込まれない

envファイルの中身

``` php
APP_NAME： 開発しているサイト名
APP_ENV： 開発しているサイトの実行環境名(local/staging/production)
APP_KEY： 暗号化に使われるキー
APP_DEBUG： デバッグの表示設定(デフォルトはtrue)
APP_URL： サイトのURL
LOG_CHANNEL： ログ情報の設定
DB_CONNECTION：利用するデータベースの種類 (mysql/pgsql/sqlite)
DB_HOST：データベースのホスト
DB_PORT：データベースが利用するポート番号
DB_DATABASE：利用するデータベース名
DB_USERNAME：利用するデータベース名にアクセスするユーザー名
DB_PASSWORD：利用するデータベース名にアクセスするパスワード
```

configなどを深堀りしたほうがいいようだ。

## 04

### [jQueryの「配列内に1つでも値があればtrueを返す」でハマった \- Qiita](https://qiita.com/wakanaction/items/306394b12da492a9ac27)

```js
  /**
   * 配列を受け取り、1つでも値が入っていればtrueを返す
   * 間違い版
   */
  "SampleArrayCheck": function(targetArray) {
    $.each(targetArray, function(index, answer){
      if(answer){
        return true;
      }
    });
    return false;
  },
```

上記のコードは配列をeach()で回し、条件に当てはまったらtrueを返し、ループを抜けるコードなのだが、うまくいかない。

原因としては、returnしているが、毎回のfunctionを抜けているだけでeach()を抜けていないらしい。

変数に格納する形に変更するとうまくいく。

```js
  /**
   * 配列を受け取り、1つでも値が入っていればtrueを返す
   * 修正版
   */
  "SampleArrayCheck": function(targetArray) {
    // 関数のスコープ内でステータス管理の変数を用意する
    let result = false;

    $.each(targetArray,function(index, answer){
      if(answer){
        // trueを代入するだけにする
        result = true;
      }
    });

    // trueでもfalseでもここで返る
    return result;
  },
```

なぜ、returnしてもeach()から抜けないのか?

`return true`はeach()内のfunctionに掛かっているから