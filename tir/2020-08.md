# 2020-08

## 03

### [【JavaScript】レスポンシブな条件分岐にはwindow\.matchMediaを使う \- Qiita](https://qiita.com/flat-ito/items/44d6526a720201aecca4)

window.matchMediaは指定されたメディアクエリ文字列のパース結果を表し、MediaQueryListを作成する

[window\.matchMedia \- Web API \| MDN](https://developer.mozilla.org/ja/docs/Web/API/Window/matchMedia)

※パースは解析のこと

メディアクエリから、メディアの幅と高さ、色数などがわかる

[メディアクエリ \- 開発者ガイド \| MDN](https://developer.mozilla.org/ja/docs/Web/Guide/CSS/Media_queries)

例

デバイスの幅の大きさで処理を分岐する

```js
const matchMedia = window.matchMedia('(max-width:1000px)');

if (matchMedia.matches) {
  // 1000px以下で行う処理
} else {
  // 1001px以上で行う処理
}
```

デバイス幅を通過した時の処理

```js
const matchMedia = window.matchMedia('(max-width:1000px)');

// 1000px通過時にmyFuncを実行する
matchMedia.addListener(myFunc);
```

'addListener'はMediaQueryListのメソッドの一つでMediaQueryListにコールバックを追加する。コールバックはリスト内のメディアクエリと文書が一致しない場合、呼び出される。

[MediaQueryList \- Web API \| MDN](https://developer.mozilla.org/ja/docs/Web/API/MediaQueryList)

## 04

### [マルチドメイン（VirtualHost）にSSL設定する \- Qiita](https://qiita.com/kana-t/items/e37a9bcd13b314481036)

centosを使う

マルチドメインは１つのサーバーに複数のドメインでwebサイトを管理できる方法。

VirtualHostには
- Nameベース
  - 利用するドメイン全てに同じipアドレスを使用
- IPベース 
  - 利用するドメインごとにipアドレスを設定 

の2種類がある


この記事ではSSLを設定するためにLet's Encryptを使う。

Let's Encryptは簡単に言うと無料で証明書を発行してくれるもの

[Let's Encrypt \- フリーな SSL/TLS 証明書](https://letsencrypt.org/ja/)

Let's Encryptを使うにはCertbotをインストールする必要がある

このツールはpython2.7系が必要

python2.7系をインストール

```
$ sudo yum install centos-release-scl-rh
$ sudo yum install python27
$ sudo scl enable python27 bash
```

Certbotをインストール

```
$ url https://dl.eff.org/certbot-auto -o /usr/bin/certbot-auto
```

※権限の変更を行なう

証明書の発行

```
$ certbot-auto certonly --webroot -w /var/www/hoge -d hoge.com --email hoge@hoge.com
```

実行するといくつかの質問が出てくるがそれ答えると証明書が発行される。


`ssh.conf`を編集し証明書を設定する

※httpsは443ポートを使う

```
// 削除
<virtualhost _default_:443>
~
</virtulahost>

// 追加
NameVirtualHost *:443
```
