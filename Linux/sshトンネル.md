# sshトンネル

sshトンネルはsshポートフォワーディングとも呼ばれている。

ポートフォワーディングとは複数のサーバーを管理する時に使える技術で、AからBのサーバーに接続したいが、セキュリティやネットワークの関係で直接接続できない時、AとBの間にCというサーバーを置き、Cを経由して間接的に接続出来るようにすること。


例: ローカルのポートをリモート先に転送したい場合

自分のPCから、ネットワークの都合上、直接接続できないAというwebサーバーにBというサーバーを経由して接続するとき

```
ssh hostB -L 8080:hostA:80 -N
```

`-L`オプションはLocalを表す。
`-N`オプションはリモートのコマンドを実行せずに待機状態にするもの。

例： リモート側のポートをローカルに転送したい場合
Cという外部のネットワークにあるサーバーの1010というホストから、ローカルを経由してhostDに接続するとき

```
ssh hostC -R 1010:hostD:22 -N
```

`-R`オプションはリモートを表す。

### 参考

[SSHポートフォワーディングを知った話 \- Qiita](https://qiita.com/Ayaka14/items/449e2236af4b8c2beb81)

[SSHポートフォワード（トンネリング）を使って、遠隔地からLAN内のコンピュータにログインする \- ククログ\(2014\-09\-12\)](https://www.clear-code.com/blog/2014/9/12.html)

[SSHポートフォワーディング（トンネリング）とは: 小粋空間](http://www.koikikukan.com/archives/2016/09/15-000300.php)

[楽しいトンネルの掘り方\(オプション: \-L, \-R, \-f, \-N \-g\) — 京大マイコンクラブ \(KMC\)](https://www.kmc.gr.jp/advent-calendar/ssh/2013/12/09/tunnel2.html)